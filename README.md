# ğŸ”‹ ç”µåŠ›ç½‘ç»œåˆ†åŒºå¼ºåŒ–å­¦ä¹ ç³»ç»Ÿ

åŸºäºå›¾æ³¨æ„åŠ›ç½‘ç»œ(GAT)å’Œå¼ºåŒ–å­¦ä¹ (PPO)çš„ç”µåŠ›ç½‘ç»œæ™ºèƒ½åˆ†åŒºç³»ç»Ÿï¼Œæ”¯æŒå¢å¼ºå¥–åŠ±æœºåˆ¶å’Œåœºæ™¯ç”Ÿæˆã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install torch torch-geometric numpy matplotlib pyyaml tqdm
pip install pandapower networkx plotly seaborn  # å¯é€‰ä¾èµ–
```

### ç«‹å³å¼€å§‹è®­ç»ƒ

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰
python train.py --mode quick

# æ ‡å‡†è®­ç»ƒï¼ˆ30åˆ†é’Ÿï¼‰
python train.py --mode standard

# å¢å¼ºå¥–åŠ±è®­ç»ƒï¼ˆæ¨èï¼‰
python train.py --config enhanced_rewards_training

# å®Œæ•´è®­ç»ƒï¼ˆ2-4å°æ—¶ï¼‰
python train.py --mode full

# IEEE 118èŠ‚ç‚¹å¤§è§„æ¨¡è®­ç»ƒ
python train.py --mode ieee118
```

### æ¨¡å‹è¯„ä¼°æµ‹è¯•

```bash
# å¿«é€ŸA/Bæµ‹è¯•å¯¹æ¯”
python test.py --mode ab_test

# å¥–åŠ±å‡½æ•°æ·±åº¦åˆ†æ
python test.py --mode reward_analysis

# æ€§èƒ½åˆ†æè¯„ä¼°
python test.py --mode performance

# å®Œæ•´è¯„ä¼°æµç¨‹ï¼ˆæ¨èï¼‰
python test.py --mode full

# æŒ‡å®šæ¨¡å‹è·¯å¾„è¯„ä¼°
python test.py --mode full --model checkpoints/best_model.pth
```

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

### ğŸ—ï¸ åŒæ¨¡å—è®¾è®¡

- **ğŸš€ `train.py`** - è®­ç»ƒæ¨¡å—ï¼šä¸“æ³¨äºæ¨¡å‹è®­ç»ƒã€æ•°æ®å¤„ç†ã€åŸºç¡€å¯è§†åŒ–
- **ğŸ§ª `test.py`** - è¯„ä¼°æ¨¡å—ï¼šä¸“æ³¨äºA/Bæµ‹è¯•ã€å¥–åŠ±åˆ†æã€æ€§èƒ½è¯„ä¼°

### è®­ç»ƒæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | è®­ç»ƒæ—¶é—´ | å›åˆæ•° | é€‚ç”¨åœºæ™¯ | ç‰¹è‰²åŠŸèƒ½ |
|------|----------|--------|----------|----------|
| `quick` | 5åˆ†é’Ÿ | 100 | åŠŸèƒ½éªŒè¯ã€å¿«é€Ÿæµ‹è¯• | è½»é‡åŒ–é…ç½® |
| `standard` | 30åˆ†é’Ÿ | 1000 | æ—¥å¸¸ç ”ç©¶ã€ç®—æ³•éªŒè¯ | å¹³è¡¡æ€§èƒ½ä¸æ—¶é—´ |
| `enhanced_rewards_training` | 45åˆ†é’Ÿ | 1500 | **æ¨èæ¨¡å¼**ã€é«˜è´¨é‡è®­ç»ƒ | ä¸‰é˜¶æ®µå¢å¼ºå¥–åŠ± |
| `full` | 2-4å°æ—¶ | 5000 | é«˜è´¨é‡ç»“æœã€è®ºæ–‡å®éªŒ | å®Œæ•´è®­ç»ƒæµç¨‹ |
| `ieee118` | 4-8å°æ—¶ | 3000 | å¤§è§„æ¨¡ç³»ç»Ÿæµ‹è¯• | å¹¶è¡Œ+åœºæ™¯ç”Ÿæˆ |

### è¯„ä¼°æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | è¯„ä¼°æ—¶é—´ | åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ | è¾“å‡ºç»“æœ |
|------|----------|------|----------|----------|
| `ab_test` | 10-20åˆ†é’Ÿ | A/Bæµ‹è¯•å¯¹æ¯” | æ–¹æ³•å¯¹æ¯”ã€åŸºçº¿éªŒè¯ | å¯¹æ¯”å›¾è¡¨ã€ç»Ÿè®¡æŠ¥å‘Š |
| `reward_analysis` | 5-10åˆ†é’Ÿ | å¥–åŠ±å‡½æ•°åˆ†æ | å¥–åŠ±è®¾è®¡ä¼˜åŒ– | ç»„ä»¶åˆ†æã€ç›¸å…³æ€§å›¾ |
| `performance` | 15-30åˆ†é’Ÿ | æ€§èƒ½åˆ†æ | ç³»ç»Ÿä¼˜åŒ–ã€æ‰©å±•æ€§æµ‹è¯• | æ€§èƒ½æŒ‡æ ‡ã€å¯æ‰©å±•æ€§å›¾ |
| `full` | 30-60åˆ†é’Ÿ | **å®Œæ•´è¯„ä¼°æµç¨‹** | è®ºæ–‡å®éªŒã€ç³»ç»ŸéªŒè¯ | ç»¼åˆHTMLæŠ¥å‘Š |

## ğŸ¯ å¢å¼ºå¥–åŠ±ç³»ç»Ÿ

### ä¸‰é˜¶æ®µè®­ç»ƒæµç¨‹

```bash
# ç¬¬ä¸€é˜¶æ®µï¼šç¨ å¯†å¥–åŠ±ï¼ˆè§£å†³ç¨€ç–å¥–åŠ±é—®é¢˜ï¼‰
python train.py --config stage1_dense_rewards

# ç¬¬äºŒé˜¶æ®µï¼šæ™ºèƒ½æ¢ç´¢ï¼ˆå¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨ï¼‰
python train.py --config stage2_smart_exploration

# ç¬¬ä¸‰é˜¶æ®µï¼šè‡ªé€‚åº”ç‰©ç†çº¦æŸï¼ˆèå…¥é¢†åŸŸçŸ¥è¯†ï¼‰
python train.py --config stage3_adaptive_physics

# å®Œæ•´ä¸‰é˜¶æ®µè®­ç»ƒï¼ˆæ¨èï¼‰
python train.py --config enhanced_rewards_training
```

### åœºæ™¯ç”ŸæˆåŠŸèƒ½

**æ‰€æœ‰è®­ç»ƒæ¨¡å¼é»˜è®¤å¯ç”¨åœºæ™¯ç”Ÿæˆ**ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ”§ **N-1æ•…éšœ**ï¼šéšæœºæ–­å¼€çº¿è·¯æ¨¡æ‹Ÿè®¾å¤‡æ•…éšœ
- ğŸ”§ **è´Ÿè·æ‰°åŠ¨**ï¼šéšæœºè°ƒæ•´è´Ÿè·å¤§å°æ¨¡æ‹Ÿéœ€æ±‚å˜åŒ–
- ğŸ­ **ç»„åˆåœºæ™¯**ï¼šåŒæ—¶åº”ç”¨å¤šç§æ‰°åŠ¨ç±»å‹
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜**ï¼šè‡ªåŠ¨ç¼“å­˜ä¸åŒåœºæ™¯çš„å›¾æ•°æ®

## ğŸ”§ å‚æ•°é…ç½®

### è®­ç»ƒå‚æ•°

```bash
# æŒ‡å®šç”µåŠ›ç³»ç»Ÿç®—ä¾‹
python train.py --mode standard --case ieee30 --partitions 5

# è°ƒæ•´è®­ç»ƒå‚æ•°
python train.py --mode standard --episodes 2000 --lr 0.001

# å¯ç”¨å¹¶è¡Œè®­ç»ƒ
python train.py --mode parallel --workers 8

# ä¿å­˜è®­ç»ƒç»“æœ
python train.py --mode standard --save-results --output-dir my_experiment
```

### è¯„ä¼°å‚æ•°

```bash
# æŒ‡å®šæµ‹è¯•æ¡ˆä¾‹å’Œå›åˆæ•°
python test.py --mode full --case ieee30 --episodes 100

# æŒ‡å®šæ¨¡å‹è·¯å¾„è¿›è¡Œè¯„ä¼°
python test.py --mode ab_test --model checkpoints/ieee30_model.pth

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
python test.py --mode full --output-dir my_evaluation

# ç”Ÿæˆç®€åŒ–æŠ¥å‘Šï¼ˆæ— å¯è§†åŒ–ï¼‰
python test.py --mode performance --no-viz --no-report
```

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### å…¸å‹ç ”ç©¶æµç¨‹

```bash
# 1ï¸âƒ£ ç¬¬ä¸€æ­¥ï¼šå¿«é€ŸéªŒè¯ç³»ç»ŸåŠŸèƒ½
python train.py --mode quick --case ieee14
python test.py --mode ab_test --case ieee14

# 2ï¸âƒ£ ç¬¬äºŒæ­¥ï¼šæ ‡å‡†è®­ç»ƒè·å¾—åŸºçº¿æ¨¡å‹
python train.py --mode standard --case ieee30 --save-results

# 3ï¸âƒ£ ç¬¬ä¸‰æ­¥ï¼šå¢å¼ºå¥–åŠ±è®­ç»ƒä¼˜åŒ–æ€§èƒ½
python train.py --config enhanced_rewards_training --case ieee30 --save-results

# 4ï¸âƒ£ ç¬¬å››æ­¥ï¼šå®Œæ•´è¯„ä¼°å¯¹æ¯”åˆ†æ
python test.py --mode full --case ieee30 --model checkpoints/enhanced_model.pth

# 5ï¸âƒ£ ç¬¬äº”æ­¥ï¼šå¤§è§„æ¨¡ç³»ç»ŸéªŒè¯
python train.py --mode ieee118 --save-results
python test.py --mode performance --case ieee118
```

### ğŸ¯ æ¨èçš„ä¸€ç«™å¼å‘½ä»¤

```bash
# ğŸš€ è®­ç»ƒï¼šä½¿ç”¨å¢å¼ºå¥–åŠ±ç³»ç»Ÿè¿›è¡Œé«˜è´¨é‡è®­ç»ƒ
python train.py --config enhanced_rewards_training --save-results

# ğŸ§ª è¯„ä¼°ï¼šå®Œæ•´è¯„ä¼°æµç¨‹ç”Ÿæˆç»¼åˆæŠ¥å‘Š
python test.py --mode full --output-dir evaluation_results

# ğŸ“Š ç»“æœï¼šæŸ¥çœ‹ç”Ÿæˆçš„HTMLæŠ¥å‘Š
# æŠ¥å‘Šä½ç½®ï¼ševaluation_results/evaluation_report_YYYYMMDD_HHMMSS.html
```

### ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **æ–°æ‰‹ç”¨æˆ·**ï¼šå…ˆè¿è¡Œ `quick` æ¨¡å¼ç†Ÿæ‚‰ç³»ç»Ÿ
2. **ç ”ç©¶äººå‘˜**ï¼šä½¿ç”¨ `enhanced_rewards_training` + `full` è¯„ä¼°
3. **å·¥ç¨‹åº”ç”¨**ï¼šä½¿ç”¨ `ieee118` æ¨¡å¼æµ‹è¯•å¤§è§„æ¨¡æ€§èƒ½
4. **æ–¹æ³•å¯¹æ¯”**ï¼šé‡ç‚¹ä½¿ç”¨ `ab_test` æ¨¡å¼è¿›è¡ŒåŸºçº¿å¯¹æ¯”
5. **ç³»ç»Ÿä¼˜åŒ–**ï¼šä½¿ç”¨ `performance` æ¨¡å¼åˆ†æç“¶é¢ˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ train.py                  # è®­ç»ƒæ¨¡å—ï¼ˆä¸“æ³¨æ¨¡å‹è®­ç»ƒåŠŸèƒ½ï¼‰
â”œâ”€â”€ test.py                   # è¯„ä¼°æ¨¡å—ï¼ˆä¸“æ³¨æ¨¡å‹è¯„ä¼°åˆ†æï¼‰
â”œâ”€â”€ config.yaml              # ç»Ÿä¸€é…ç½®æ–‡ä»¶ï¼ˆåŒ…å«å¢å¼ºå¥–åŠ±é…ç½®ï¼‰
â”œâ”€â”€ code/                     # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ src/                  # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ data_processing.py    # æ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ gat.py                # GATç¼–ç å™¨
â”‚   â”‚   â””â”€â”€ rl/                   # å¼ºåŒ–å­¦ä¹ æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ environment.py    # ç¯å¢ƒå®šä¹‰
â”‚   â”‚       â”œâ”€â”€ agent.py          # PPOæ™ºèƒ½ä½“
â”‚   â”‚       â”œâ”€â”€ reward.py         # å¢å¼ºå¥–åŠ±ç³»ç»Ÿ
â”‚   â”‚       â”œâ”€â”€ ab_testing.py     # A/Bæµ‹è¯•æ¡†æ¶
â”‚   â”‚       â””â”€â”€ reward_analyzer.py # å¥–åŠ±åˆ†æå™¨
â”‚   â””â”€â”€ baseline/             # åŸºçº¿æ–¹æ³•
â”œâ”€â”€ cache/                    # æ•°æ®ç¼“å­˜
â”œâ”€â”€ logs/                     # è®­ç»ƒæ—¥å¿—
â”œâ”€â”€ checkpoints/              # æ¨¡å‹æ£€æŸ¥ç‚¹
â”œâ”€â”€ figures/                  # å¯è§†åŒ–å›¾è¡¨
â””â”€â”€ test_results/             # æµ‹è¯•ç»“æœ
```

## ğŸ‰ æ ¸å¿ƒç‰¹æ€§

- **ğŸ§  æ™ºèƒ½åˆ†åŒº**ï¼šåŸºäºGATçš„å›¾ç¥ç»ç½‘ç»œç¼–ç å™¨
- **ğŸ¯ å¢å¼ºå¥–åŠ±**ï¼šä¸‰é˜¶æ®µæ¸è¿›å¼å¥–åŠ±è®¾è®¡
- **ğŸ­ åœºæ™¯ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆå¤šæ ·åŒ–è®­ç»ƒåœºæ™¯
- **ğŸ“Š A/Bæµ‹è¯•**ï¼šå®Œæ•´çš„åŸºçº¿æ–¹æ³•å¯¹æ¯”æ¡†æ¶
- **ğŸ“ˆ æ·±åº¦åˆ†æ**ï¼šå¥–åŠ±å‡½æ•°å’Œæ€§èƒ½çš„å…¨é¢åˆ†æ
- **ğŸ”§ æ˜“äºä½¿ç”¨**ï¼šç®€æ´çš„å‘½ä»¤è¡Œæ¥å£
- **ğŸ“‹ å®Œæ•´è¯„ä¼°**ï¼šä»è®­ç»ƒåˆ°è¯„ä¼°çš„å…¨æµç¨‹æ”¯æŒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ä¾èµ–å®‰è£…æ˜¯å¦å®Œæ•´ï¼š`python train.py --check-deps`
2. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼š`config.yaml`
3. æ•°æ®ç¼“å­˜æ˜¯å¦æ­£å¸¸ï¼š`cache/` ç›®å½•

---

**å¼€å§‹æ‚¨çš„ç”µåŠ›ç½‘ç»œåˆ†åŒºç ”ç©¶ä¹‹æ—…ï¼** ğŸš€
